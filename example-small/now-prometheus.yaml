apiVersion: monitoring.coreos.com/v1
kind: Prometheus
metadata:
  name: now
spec:
  replicas: 1
  retention: 2h
  serviceAccountName: prometheus
  image: prom/prometheus:v2.19.2@sha256:cd134bd4fca0f60ff8b4c679cebe5c5c5cf5e2da5f4886b2ae933da821915f92
  securityContext:
    runAsUser: 65534
    runAsGroup: 65534
    # Uncomment on failure to start a new instance. Left out because it may have performance implications, as configmaps may be large.
    #fsGroup: 65534
  alerting:
    alertmanagers:
    - namespace: monitoring
      name: alertmanager-main
      port: web
  serviceMonitorNamespaceSelector: {}
  podMonitorNamespaceSelector: {}
  serviceMonitorSelector:
    matchLabels:
      prometheus: now
  podMonitorSelector:
    matchLabels:
      prometheus: now
  ruleSelector:
    matchLabels:
      prometheus: now
